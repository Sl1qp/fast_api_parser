# Spimex Trading API

#### Проект представляет собой REST API для получения данных о торгах на Spimex. Сервис предоставляет информацию о торговых результатах, динамике торгов и датах торговых сессий. Особенностью проекта является автоматический парсинг данных с официального сайта Spimex и кэширование запросов в Redis с ежедневным сбросом в 14:11.

## Эндпоинты

#### Доступные эндпоинты

| Эндпоинт | Метод | Описание |
|----------|-------|----------|
| `/api/get_last_trading_dates/` | `GET` | Получение списка дат последних торговых дней |
| `/api/get_dynamics/` | `GET` | Получение динамики торгов за указанный период с фильтрацией |
| `/api/get_trading_results/` | `GET` | Получение результатов последних торгов с возможностью фильтрации |
| `/refresh/` | `DELETE` | Очистка базы данных и обновление данных через парсинг сайта Spimex |

## Запуск

### Запуск проекта производится с помощью Docker Compose:

```bash
# Клонирование репозитория
git clone <repository-url>

# Сборка контейнеров
docker-compose build
# Запуск сервисов
docker-compose up
```

### Проект будет доступен по адресу:
- API: http://localhost:8000
- Документация Swagger: http://localhost:8000/docs

## Особенности

- **Автоматический парсинг данных**: Система самостоятельно загружает данные с официального сайта Spimex
- **Кэширование Redis**: Все запросы кэшируются для повышения производительности
- **Автоматический сброс кэша**: Ежедневно в 14:11 кэш полностью очищается для обеспечения актуальности данных
- **Асинхронная обработка**: Все операции выполняются асинхронно для максимальной производительности
- **Фильтрация данных**: Возможность фильтрации результатов по различным параметрам

## Технологии

- **FastAPI**
- **PostgreSQL**
- **Redis**
- **SQLAlchemy**
- **Docker**
- **BeautifulSoup4**
- **Pandas**

## Обновление данных

Для принудительного обновления данных отправьте DELETE-запрос на эндпоинт `/refresh/`. Это очистит базу данных и запустит процесс парсинга актуальных данных с сайта Spimex. Процесс обновления занимает в среднем 3-5 минут.
